# Kirara Leoworld

## 初心

2019/10/07 月曜日，这原本是我准备用pygame练手用的一个，建立类似芳文社Kirara的横版游戏的一个软件，其中存储一些我很喜欢的二次元女孩子的信息，以及武器等等，2019年国庆假期的时候写的，大概花了三天时间学习加写完figure、weapon、work几个页面，发现战斗流程太复杂了，就没有实现，只是做了一个类似番剧数据库的玩意。

目前番剧数据库功能已被bangumi代替，**本应用全面转型为一个简单的服务于个人的生产力工具**。



## 斯金纳箱

因为很喜欢之前一个up介绍的关于斯金纳箱的观点，他把这个观点用在游戏中，我就想能不能给自己制作一个斯金纳箱，可以和**番茄工作法**结合起来。

于是用了几个小时简单设计了一下，今天花了半天时间完成了lottery模块，因为一开始没注意到这个页面其实是在不断刷新的（没错，就是忽视了藏在其中的pygame.display.flip()函数），走了一些弯路，不过意识到之后写起来简单多了。



## 水晶使用情况描述

0. KL水晶Cys和现实RMB兑换比例为10:1
1. 每日入场KL世界花销水晶1500氵
2. 每日夜间/晨间盘点当日/前日账单并计入番茄日り文档
3. KL钱包由水晶兑换使用，如果无法完成基本签到，每日消费限额10RMB
4. 项目名和常用水晶赚取消费情况如下：

|             项目名称              | 水晶变动         | 备注                 |
| :-------------------------------: | ---------------- | -------------------- |
|              兑换RMB              | 10Cys -> 1RMB    |                      |
|             工作日常              | 一个完整钟220Cys |                      |
|     看书/整理书/写作/爱好培养     | 一个完整钟200Cys |                      |
|     看娱乐视频/电子游戏/看番      | 20min -> 10Cys   |                      |
|          工程娱乐/Coding          | 半个番茄钟90Cys  |                      |
|       完成一个大于20h的事件       | 800Cys           |                      |
|    较完整看完一部番并写完感想     | 600Cys           | 消耗时间需超过120min |
|    较完整看完一本书并整理完成     | 500Cys           | 页数需超过60page     |
| 较完整看完一部剧集/游戏并写完感想 | 400Cys           | 消耗时间需超过120min |
|                                   |                  |                      |
|                                   |                  |                      |
|                                   |                  |                      |
|                                   |                  |                      |

## 未来工作计划

- [ ] 优化function.py中update_screen - lottery代码，行数过多不利于改动，准备用类+循环方式重构代码
- [ ] 抽卡部分动画实现，视频or多张图片连接实现动画or库里的反转效果？
- [ ] RPG元素加入的大计划



## 更新日志

### 2020/11/17 火曜日

增加每日入场料收取延时，从凌晨4点开始计算后一天的入场料收取。

### 2020/11/06 金曜日

根据201022日重写的win10toast，将抽奖、签到、入场料收取等环节全部改成destroy by me模型，优化程序卡顿问题。

### 2020/10/28 水曜日

修改kirara_mean.py 为程序增加鉴别自己是否在运行功能，通过检测目前已经在运行的pythonw.exe不超过两个实现，系统本身会存在一个。

### 2020/10/23 金曜日

为主窗口增加到8张可以轮换的背景图，通过按H、L进行左右切换。

### 2020/10/22 木曜日

感觉现在颇有每天写一个小功能，然后100天之后变成一个完善生产力工具的趋势~

1. 新增入场料收取功能，每日入场费用暂定为1500氵，登录即收取。
2. 使用duration_minutes增加专注时间改动时的复用性，优化代码。
3. 新增专注时间小窗口背景图随机选择。初始14张图，暂定500氵换一张新的。
4. 改写Python\Lib\site-packages\win10toast\__init__.py文件，增加根据自己需要关闭win10toaster的功能。
5. 主页面增加标题，改动按钮位置不挡住封面妹子的脸。

### 2020/10/21 水曜日

缩短休息时间为20min（原本为30min），为achievement选择页面新增加id用来确认自己完成的事件数目。

### 2020/10/20 火曜日

*增加背景图三张*，分别对应通用页面大图一张，小页面两张，现在比较深刻地认识到，功能开发成什么样子对体验的提升远远不如更换一个更好看的ui来得重要。

在实体类中新增Settingssmallwindow()类，用来统一设置小窗口的属性。

### 2020/10/19 月曜日

*增加全新功能——时间投入事件*，在专注之前首先选择事件，源自一句话：**<font color='Crimson'>很多东西即使你用再巧妙的技巧也需要时间去磨。</font>**同时方便自己查看投入时间，而不是仅仅只通过水晶来衡量。开发用时4小时。

*增加了FPS设置*，而不是之前的延时1s，这样更有助于控制刷新频率。

### 2020/08/22 土曜日

修改抽卡次数为水晶机制，280氵一次，同时对完成不同工作和签到可获得的水晶数量进行了更加合理的改动；update_screen的lottery部分优化冗余代码。

### 2020/08/19 水曜日

增加了早午夜时间段签到功能，用于合理规划自己的时间。

### 2020/08/17 月曜日

增加了倒计时的番茄计时功能，在完成后写入日志并以气泡通知。利用pyinstaller打包成可执行文件。

### 2020/08/16 日曜日

用了几个小时简单设计了一下斯金纳箱，今天花了半天时间完成了lottery模块，因为一开始没注意到这个页面其实是在不断刷新的（没错，就是忽视了藏在其中的pygame.display.flip()函数），走了一些弯路，不过意识到之后写起来简单多了。











